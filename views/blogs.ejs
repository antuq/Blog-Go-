<%- include("./partials/header.ejs") %>

    <section class="py-4 text-center container">
        <section class="row py-lg-5">
            <section class="col-lg-6 col-md-8 mx-auto">
                <h1 class="fw-light">Blog Gallery</h1>
                <p class="lead text-body-secondary">A collection of all the blogs on our website to provide user with
                    every genre of blogs and to find the one which catches their eyes. Scroll through the collection to
                    read what you want to !</p>
                <p>
                    <a href="/create-blog" class="btn btn-warning my-2">Write a Blog!</a>

                </p>
            </section>
        </section>
    </section>
    <section class="album py-5 bg-body-tertiary">
        <section class="container">
            <section class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                <% if(locals.blogData){ %>
                    <%for(let i=0; i<blogData.blogs.length; i++) {%>
                        <section class="col">
                            <section class="card shadow-sm">
                                <img class="img-fluid" src="/uploads/<%= blogData.blogs[i].banner %>"
                                    alt="<%= blogData.blogs[i].banner %>" width="419.567" height="297.2">
                                <section class="card-body">
                                    <h5>
                                        <%= blogData.blogs[i].title %>
                                    </h5>
                                    <p class="card-text">
                                        <%= blogData.blogs[i].description.slice(0, 50) + "..." %>
                                    </p>
                                    <section class="d-flex justify-content-between align-items-center">
                                        <section class="btn-group">
                                            <a class="btn btn-outline-secondary text-decoration-none"
                                                href="/blog/<%= blogData.blogs[i].id %>-<%= blogData.blogs[i].title.replace(/\s+/g, '__').toLowerCase() %>">View</a>
                                            <a class="btn btn-warning btn-outline-dark text-center text-decoration-none text-reset"
                                                href="/edit/<%= blogData.blogs[i].id %>-<%= blogData.blogs[i].title.replace(/\s+/g, '__').toLowerCase() %>">Edit</a>
                                            <a class="btn btn-danger btn-outline-dark text-center text-decoration-none text-reset"
                                                onclick="return confirm('Are you sure you want to delete this blog?')"
                                                href="/delete/<%= blogData.blogs[i].id %>-<%= blogData.blogs[i].title.replace(/\s+/g, '__').toLowerCase() %>"><i class="text-white bi bi-trash"></i></a>
                                            
                                        </section>
                                        <small class="text-muted">
                                            <span>Author Name</span>
                                            <span class="ml-2">
                                                <%= new Date(blogData.blogs[i].date).toLocaleDateString() %>
                                            </span>
                                        </small>
                                    </section>
                                </section>
                            </section>
                        </section>

                        <%}%>
                            <%} else {%>
                                <%- include('./partials/blogPost.ejs') %>
                                    <%- include('./partials/blogPost.ejs') %>
                                        <%- include('./partials/blogPost.ejs') %>
                                            <%}%>

            </section>
        </section>
    </section>

    <%- include("./partials/footer.ejs") %>